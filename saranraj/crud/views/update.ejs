<html>
<head>
    <title>UPDATE</title>
    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
  </head>
  <body>
      <div class="container mt-5">
          <h3>Products</h3>
          <form autocomplete="off">
            <div class="form-group">
                <input id="pid"value="<%=elements[0].product_id%>" style="display: none;" type="text">
              <input id="pname"value="<%=elements[0].product_name%>" type="text" class="form-control" placeholder="Enter Product Name" name="pname">
              </div>
              <div class="form-group">
                <select name="catid" id="cat" class="form-control">
                  
                  <option value="<%=elements[0].category_id%>" selected><%=elements[0].category_name%></option>
                
                  <%for(var i=0 ;i<elementscat.length; i++) { %>
                    <%if(elementscat[i].category_name==elements[0].category_name){continue;}%>
                    <option value="<%=elementscat[i].category_id%>"><%=elementscat[i].category_name%></option>
                    <%}%>
                  </select>
                </div>
                <div class="form-group">
                  <input id="pprice" value="<%= elements[0].price%>" type="text" class="form-control" placeholder="Enter Price" name="price">
                </div>
                  <a onclick="insert()" class="btn btn-primary text-white">Update</a>
                  <a href="/" class="px-5 btn  btn-outline-primary">View</a>
              </div>
            </form>
          </div>
        </div>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
        <script>
            function insert(){
                console.log("hi")
                let id=document.getElementById("pid").value;
                let price=document.getElementById("pprice").value;
                let pname=document.getElementById("pname").value;
                let ct=document.getElementById("cat");
                let cat=ct.options[ct.selectedIndex].value;   
          $.ajax({
            type: "POST",
            url: "/update",
            dataType: "json",
            data: {
                product_id:id,
                product_name:pname,
                price:price,
                category_id:cat
            }
            });
            }
        </script>
</body>
</html>